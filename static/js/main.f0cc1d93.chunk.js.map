{"version":3,"sources":["components/OrderBook/Row.js","components/OrderBook/BidsBook.js","components/OrderBook/AsksBook.js","store/OrderBook/actions/update_bids.js","store/OrderBook/actions/update_asks.js","store/OrderBook/actions/clear_asks.js","store/OrderBook/actions/clear_bids.js","containers/OrderBook.js","store/OrderBook/reducerUtil.js","store/store.js","store/OrderBook/reducers/bids.js","store/OrderBook/reducers/asks.js","store/OrderBook/reducers/interface.js","App.js","serviceWorker.js","index.js"],"names":["Row","_ref","row","index","books","zoom","type","maxTotal","reduce","a","b","total","percentage","bimage","concat","react_default","createElement","className","style","backgroundImage","key","amount","count","price","Math","abs","parseFloat","toFixed","BidsBook","props","role","orderBookBids","map","OrderBook_Row","AsksBook","orderBookAsks","updateBidsOrderBook","newBidsData","orderBy","updateAsksOrderBook","newAsksData","clearAsksOrderBook","clearBidsOrderBook","wss","OrderBook","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","connectionReady","isConnected","pres","volume24h","lastPrice","priceChange","subscribeToBtc","closeConnection","currentPres","setState","_this2","WebSocket","onopen","console","log","send","JSON","stringify","event","flags","channel","pair","prec","len","onmessage","evt","payloadData","Array","isArray","length","tmpbookOrderRow","interFace","order","onMessageRecieved","parse","data","onclose","close","disabled","onClick","zoomOut","bind","zoomIn","lessPrecision","morePrecision","OrderBook_BidsBook","OrderBook_AsksBook","Component","connect","dispatch","bindActionCreators","reducerUtil","arguments","undefined","newState","asks","priceExists","forEach","slice","newStateCombined","toConsumableArray","sort","pop","filter","objectSpread","rootReducer","combineReducers","action","dataManimpulator","format","visual","persistedStore","stateStr","localStorage","getItem","e","error","loadFromLocalStorage","store","createStore","subscribe","setItem","saveToLocalStorage","getState","App","es","reducers","containers_OrderBook","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f0cc1d93.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction Row({ row, index, books, zoom, type }) {\n  const maxTotal = books.reduce((a, b) => (a < b.total ? b.total : a), 0);\n  const percentage = (row.total * 100) / (maxTotal * zoom);\n  // let percentage = ((100 * row.total) / (books[books.length - 1].total * zoom))\n  let bimage =\n    type === \"bits\"\n      ? `linear-gradient(to left, #314432 ${percentage}%, #1b262d 0%)`\n      : `linear-gradient(to right, #402c33 ${percentage}%, #1b262d 0%)`;\n  // let staticStyle =  {\n  //     display:  \"initial\",\n  //     position: \"absolute\",\n  //     width: `calc(${percentage}% - 10px)`,\n  //     height: \"17px\",\n  //   }\n  // let style = type === 'bits' ? {...staticStyle, background:\"rgba(82,108,46, 0.3)\", right: \"0px\"}:{...staticStyle, background:\"rgba(139,42,2, 0.3)\",left: \"0px\"}\n  return (\n    <div\n      className={type === \"bits\" ? \"flex-table\" : \"flex-table reverse\"}\n      style={{ backgroundImage: bimage }}\n      key={`${type}-${index}${row.amount}${row.count}%${row.price}${row.total}`}\n    >\n      {/*<span\n     style={style}\n   />*/}\n      <div className=\"flex-row\">{row.count}</div>\n      <div className=\"flex-row\">\n        {Math.abs(parseFloat(row.amount)).toFixed(4)}\n      </div>\n      <div className=\"flex-row\">{parseFloat(row.total).toFixed(4)}</div>\n      <div className=\"flex-row\">{row.price}</div>\n    </div>\n  );\n}\n\nexport default Row;\n","import React from \"react\";\nimport Row from './Row';\n\nfunction BidsBook(props) {\n  \n  function renderBidRows() {\n    \n    if (!props.orderBookBids) {\n      return <h2>Loading...</h2>;\n    }\n    return props.orderBookBids.map((row, index) =><Row\n      key={row.price}\n      row={row}\n      index={index}\n      books={props.orderBookBids}\n      zoom={props.zoom}\n      type={\"bits\"}\n    />);\n  } \n    return (\n\n      <div className=\"table-container\">\n      <div className=\"flex-table header\" role=\"rowgroup\">\n        <div className=\"flex-row\">COUNT</div>\n        <div className=\"flex-row\">AMOUNT</div>\n        <div className=\"flex-row\">TOTAL</div>\n        <div className=\"flex-row\">PRICE</div>\n      </div>\n      {renderBidRows()}\n    </div>\n    );\n}\n\nexport default BidsBook;\n","import React from \"react\";\nimport Row from \"./Row\";\n\nfunction AsksBook(props) {\n  function renderAskRows() {\n    if (!props.orderBookAsks) {\n      return <h2>Loading...</h2>;\n    }\n    return props.orderBookAsks.map((row, index) =><Row\n      key={row.price}\n      row={row}\n      index={index}\n      books={props.orderBookAsks}\n      zoom={props.zoom}\n      type={\"asks\"}\n    />);\n  }\n  return (\n    <div className=\"table-container\">\n      <div className=\"flex-table header\" role=\"rowgroup\">\n        <div className=\"flex-row\">PRICE</div>\n        <div className=\"flex-row\">TOTAL</div>\n        <div className=\"flex-row\">AMOUNT</div>\n        <div className=\"flex-row\">COUNT</div>\n      </div>\n      {renderAskRows()}\n    </div>\n  );\n}\n\nexport default AsksBook;\n","function updateBidsOrderBook(newBidsData, orderBy) {\n  return {\n    type: 'UPDATE_BIDS_ORDER_BOOK',\n    newBidsData: newBidsData,\n    orderBy: orderBy\n  }\n}\nexport default updateBidsOrderBook;","function updateAsksOrderBook(newAsksData,orderBy) {\n  return {\n    type: 'UPDATE_ASKS_ORDER_BOOK',\n    newAsksData: newAsksData,\n    orderBy: orderBy\n  }\n}\nexport default updateAsksOrderBook;","function clearAsksOrderBook(newAsksData) {\n  return {\n    type: 'CLEAR_ASKS',\n    newAsksData: []\n  }\n}\nexport default clearAsksOrderBook;","function clearBidsOrderBook(newBidsData) {\n  return {\n    type: 'CLEAR_BIDS',\n    newBidsData: []\n  }\n}\nexport default clearBidsOrderBook;","import React, { Component } from \"react\";\nimport BidsBook from \"../components/OrderBook/BidsBook\";\nimport AsksBook from \"../components/OrderBook/AsksBook\";\nimport { connect } from \"react-redux\";\nimport updateBidsOrderBook from \"../store/OrderBook/actions/update_bids\";\nimport updateAsksOrderBook from \"../store/OrderBook/actions/update_asks\";\nimport clearAsksOrderBook from \"../store/OrderBook/actions/clear_asks\";\nimport clearBidsOrderBook from \"../store/OrderBook/actions/clear_bids\";\nimport { bindActionCreators } from \"redux\";\n\nlet wss;\nclass OrderBook extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      connectionReady: true,\n      isConnected: false,\n      pres: 0,\n      volume24h: 0,\n      lastPrice: 0,\n      priceChange: 0,\n      zoom: 1,\n    };\n  }\n  componentDidMount() {\n    this.subscribeToBtc();\n  }\n  componentWillUnmount() {\n    this.closeConnection();\n  }\n  morePrecision() {\n    this.closeConnection();\n    this.props.clearBidsOrderBook();\n    this.props.clearAsksOrderBook();\n    const currentPres = this.state.pres;\n    this.setState({ pres: currentPres + 1 });\n    this.subscribeToBtc();\n  }\n\n  lessPrecision() {\n    this.closeConnection();\n    this.props.clearBidsOrderBook();\n    this.props.clearAsksOrderBook();\n    const currentPres = this.state.pres;\n    this.setState({ pres: currentPres - 1 });\n    this.subscribeToBtc();\n  }\n  subscribeToBtc() {\n    this.setState({ isConnected: true });\n    let onMessageRecieved = (payloadData) => {\n      if (\n        !payloadData.event &&\n        Array.isArray(payloadData[1]) &&\n        payloadData[1].length === 3\n      ) {\n        //Is order book data\n        let tmpbookOrderRow = {\n          price: parseFloat(payloadData[1][0]),\n          count: payloadData[1][1],\n          amount: parseFloat(payloadData[1][2]),\n          total: parseFloat(0),\n        };\n        tmpbookOrderRow.amount > 0\n          ? this.props.updateBidsOrderBook(\n              tmpbookOrderRow,\n              this.interFace.order\n            )\n          : this.props.updateAsksOrderBook(\n              tmpbookOrderRow,\n              this.interFace.order\n            );\n      }\n    };\n    wss = new WebSocket(\"wss://api-pub.bitfinex.com/ws/2\");\n    wss.onopen = () => {\n      console.log(\"connected\");\n      this.setState({ connectionReady: true });\n      wss.send(JSON.stringify({ event: \"conf\", flags: 131072 }));\n      wss.send(\n        JSON.stringify({\n          event: \"subscribe\",\n          channel: \"book\",\n          pair: \"tBTCUSD\",\n          prec: \"P\" + this.state.pres,\n          len: 25,\n        })\n      );\n    };\n\n    wss.onmessage = (evt) => {\n      // listen to data sent from the websocket server\n      const message = JSON.parse(evt.data);\n      onMessageRecieved(message);\n    };\n\n    wss.onclose = () => {\n      console.log(\"disconnected\");\n    };\n  }\n\n  closeConnection() {\n    wss.close();\n    this.setState({ isConnected: false });\n  }\n\n  zoomOut() {\n    this.setState({ zoom: this.state.zoom - 0.2 });\n  }\n\n  zoomIn() {\n    this.setState({ zoom: this.state.zoom + 0.2 });\n  }\n\n  render() {\n    return (\n      <div>\n        <div>\n          <button\n            disabled={this.state.zoom < 0.21}\n            onClick={this.zoomOut.bind(this)}\n          >\n            Z-\n          </button>\n          <button\n            disabled={this.state.zoom === 1}\n            onClick={this.zoomIn.bind(this)}\n          >\n            Z+\n          </button>\n          <button\n            disabled={this.state.pres === 0}\n            onClick={this.lessPrecision.bind(this)}\n          >\n            P-\n          </button>\n          <button\n            disabled={this.state.pres === 3}\n            onClick={this.morePrecision.bind(this)}\n          >\n            P+\n          </button>\n        </div>\n        <div className=\"books-wrapper\">\n          <div className=\"bids-container\">\n            <BidsBook\n              orderBookBids={this.props.orderBookBids}\n              zoom={this.state.zoom}\n            />\n          </div>\n          <div className=\"asks-container\">\n            <AsksBook\n              orderBookAsks={this.props.orderBookAsks}\n              zoom={this.state.zoom}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    orderBookBids: state.orderBookBids,\n    orderBookAsks: state.orderBookAsks,\n    interFace: state.interFace,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      updateAsksOrderBook: updateAsksOrderBook,\n      updateBidsOrderBook: updateBidsOrderBook,\n      clearBidsOrderBook: clearBidsOrderBook,\n      clearAsksOrderBook: clearAsksOrderBook,\n    },\n    dispatch\n  );\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(OrderBook);\n","export default function(state = [], newState, asks, orderBy = \"price\") {\n  let priceExists = false;\n\n  if (state.length > 0) {\n    state.forEach((row, index) => {\n      if (row.price && newState.price && row.price === newState.price) {\n        //Price already exists, so it should only update current row.\n        priceExists = true;\n        state[index].count = newState.count;\n        state[index].amount = newState.amount;\n      }\n    });\n  }\n\n  if (priceExists === true) {\n    priceExists = false;\n    return state.slice();\n  } else {\n    let newStateCombined = [...state, newState];\n    //Sort form lowest to highest price before returning. asks\n    //Sort form highest to lowest  price before returning. Bits\n    newStateCombined.sort(function(a, b) {\n      return asks ? a[orderBy] - b[orderBy] : b[orderBy] - a[orderBy];\n    });\n\n    if (newStateCombined.length > 25) {\n      newStateCombined.pop();\n    }\n\n    // if (newStateCombined.length > 0) {\n    //   newStateCombined.forEach(function(row, index) {\n    //     if (!row || row.count === 0) {\n    //       newStateCombined.splice(index, 1);\n    //     }\n\n    //     if (asks && (!row || row.amount > 0)) {\n    //       newStateCombined.splice(index, 1);\n    //     }\n    //   });\n    // }\n\n    return newStateCombined\n      .filter((row) => row && row.amount !== 0)\n      .map((row, index) => {\n        if (newStateCombined[index - 1] && newStateCombined[index - 1].total) {\n          return {\n            ...row,\n            total:\n              parseFloat(newStateCombined[index - 1].total) +\n              Math.abs(parseFloat(row.amount)),\n          };\n        } else {\n          return { ...row, total: parseFloat(row.amount) };\n        }\n      });\n  }\n}\n","import { createStore, combineReducers } from \"redux\";\nimport OrderBookBidsReducer from \"./OrderBook/reducers/bids\";\nimport OrderBookAsksReducer from \"./OrderBook/reducers/asks\";\nimport interFace from \"./OrderBook/reducers/interface\";\n\nconst saveToLocalStorage = (state) => {\n  try {\n    localStorage.setItem(\"state\", JSON.stringify(state));\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nconst loadFromLocalStorage = () => {\n  try {\n    const stateStr = localStorage.getItem(\"state\");\n    return stateStr ? JSON.parse(stateStr) : undefined;\n  } catch (e) {\n    console.error(e);\n    return undefined;\n  }\n};\n\nconst rootReducer = combineReducers({\n  orderBookBids: OrderBookBidsReducer,\n  orderBookAsks: OrderBookAsksReducer,\n  interFace: interFace,\n});\n\nconst persistedStore = loadFromLocalStorage();\n\nconst store = createStore(rootReducer, persistedStore);\n\nstore.subscribe(() => {\n  saveToLocalStorage(store.getState());\n});\n\nexport default store;\n","import dataManimpulator from \"../reducerUtil\";\n\nexport default function(state = [], action) {\n  const { type, newBidsData, orderBy } = action;\n  switch (type) {\n    case \"UPDATE_BIDS_ORDER_BOOK\":\n      return dataManimpulator(state, newBidsData, false, orderBy);\n    case \"CLEAR_BIDS\":\n      return newBidsData;\n    default:\n      return state.slice();\n  }\n}\n","import dataManimpulator from \"../reducerUtil\";\nexport default function(state = [], action) {\n  const { type, newAsksData, orderBy } = action;\n  switch (type) {\n    case \"UPDATE_ASKS_ORDER_BOOK\":\n      return dataManimpulator(state, newAsksData, true, orderBy);\n    case \"CLEAR_ASKS\":\n      return newAsksData;\n    default:\n      return state.slice();\n  }\n}\n","export default function(\n  state = { format: \"compact\", visual: \"default\", order: \"price\" },\n  action\n) {\n  const { type, data } = action;\n  switch (type) {\n    case \"UPDATE_ORDER\":\n      return { ...state, order: data };\n    case \"UPDATE_VISUALIZATION\":\n      return { ...state, visual: data };\n    case \"UPDATE_FORMAT\":\n      return { ...state, format: data };\n    default:\n      return { ...state };\n  }\n}\n","import React, { Component } from 'react';\nimport OrderBook from './containers/OrderBook';\n\nimport { Provider } from 'react-redux';\n\nimport reducers from './store/store';\n\n\nclass App extends Component {\n  render() {\n    return (\n      <Provider store={reducers}>\n        <div className=\"App\">\n          <OrderBook/>\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './scss/index.scss';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}