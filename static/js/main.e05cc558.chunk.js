(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(50)},36:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(26),c=a.n(r),s=(a(36),a(7)),i=a(8),l=a(10),u=a(9),m=a(11),d=a(16),h=a.n(d),p=a(15),E=a.n(p),f=a(24),k=a.n(f),g=a(30),b=a.n(g),B=a(23),O=a.n(B),v=a(27),x=a(18),A=a.n(x),y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderBidRows",value:function(){var e=this;return this.props.orderBookBids?this.props.orderBookBids.map(function(t,a){return o.a.createElement("tr",{className:"bids-row",key:t.price},o.a.createElement("td",{style:{display:a>23?"none":"initial",position:"absolute",right:"0px",background:"rgba(82,108,46, 0.3)",width:"calc(".concat((100*t.total/e.props.orderBookBids[e.props.orderBookBids.length-1].total).toFixed(0)*e.props.zoom,"% - 20px)"),height:"37px"}}),o.a.createElement("td",{className:"text-center"},t.count),o.a.createElement("td",{className:"text-right"},t.amount),o.a.createElement("td",{className:"text-right"},t.total),o.a.createElement("td",{className:"text-right"},t.price))}):o.a.createElement("h2",null,"Loading...")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(A.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",{className:"text-center"},"COUNT"),o.a.createElement("th",{className:"text-right"},"AMOUNT"),o.a.createElement("th",{className:"text-right"},"TOTAL"),o.a.createElement("th",{className:"text-right"},"PRICE"))),o.a.createElement("tbody",null,this.renderBidRows())))}}]),t}(n.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderAskRows",value:function(){var e=this;return this.props.orderBookAsks?this.props.orderBookAsks.map(function(t,a){var n=Math.abs(t.amount);return o.a.createElement("tr",{key:t.price},o.a.createElement("td",{style:{display:a>23?"none":"initial",position:"absolute",left:"0px",background:"rgba(139,42,2, 0.3)",width:"calc(".concat((100*t.total/e.props.orderBookAsks[e.props.orderBookAsks.length-1].total).toFixed(0)*e.props.zoom,"% - 20px)"),height:"37px"}}),o.a.createElement("td",{className:"text-right"},t.price),o.a.createElement("td",{className:"text-right"},t.total),o.a.createElement("td",{className:"text-right"},n),o.a.createElement("td",{className:"text-center"},t.count))}):o.a.createElement("h2",null,"Loading...")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(A.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",{className:"text-right"},"PRICE"),o.a.createElement("th",{className:"text-right"},"TOTAL"),o.a.createElement("th",{className:"text-right"},"AMOUNT"),o.a.createElement("th",{className:"text-center"},"COUNT"))),o.a.createElement("tbody",null,this.renderAskRows())))}}]),t}(n.Component),C=a(19);var N=function(e){return{type:"UPDATE_BIDS_ORDER_BOOK",newBidsData:e}};var j=function(e){return{type:"CLEAR_BIDS",newBidsData:[]}};var D=function(e){return{type:"UPDATE_ASKS_ORDER_BOOK",newAsksData:e}};var S,F=function(e){return{type:"CLEAR_ASKS",newAsksData:[]}},R=a(2),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={connectionReady:!0,isConnected:!1,volume24h:0,lastPrice:0,priceChange:0,zoom:1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.subscribeToAll()}},{key:"componentWillUnmount",value:function(){this.closeConnection()}},{key:"subscribeToAll",value:function(){var e=this,t={};function a(e){console.log("closed"),console.log(e)}S=new v.a("wss://api-pub.bitfinex.com/ws/2",{timeout:5e3,maxAttempts:10,onopen:function(t){console.log("connected"),console.log(t),e.setState({connectionReady:!0});var a=JSON.stringify({event:"subscribe",channel:"book",symbol:"tBTCUSD"});S.send(a)},onmessage:function(a){if(t=JSON.parse(a.data),console.log(a),console.log(t),!t.event&&Array.isArray(t[1])&&3===t[1].length){var n={price:parseFloat(t[1][0]).toFixed(1),count:t[1][1],amount:parseFloat(t[1][2]).toFixed(2),total:parseFloat(0).toFixed(2)};n.amount>0?e.props.updateBidsOrderBook(n):e.props.updateAsksOrderBook(n)}},onreconnect:function(e){return console.log("Reconnecting...",e)},onmaximum:function(e){return console.log("Stop Attempting!",e)},onclose:function(e){return a},onerror:function(e){return console.log("Error:",e)}}),this.setState({isConnected:!0})}},{key:"closeConnection",value:function(){S.close(),this.setState({isConnected:!1})}},{key:"formmatNumberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"zoomOut",value:function(){this.setState({zoom:this.state.zoom-.2})}},{key:"zoomIn",value:function(){this.setState({zoom:this.state.zoom+.2})}},{key:"render",value:function(){var e=this.state.priceChange>=0?"rgba(82,108,46)":"rgba(139,42,2)";e=0===this.state.priceChange?"white":e;var t=this.state.priceChange>=0?" +":" -";return t=0===this.state.priceChange?"":t,o.a.createElement(O.a,{fluid:!0},o.a.createElement(E.a,null,o.a.createElement(h.a,{lg:12,className:"buttons-container text-left mb-3"},o.a.createElement("div",{className:"ticker-container text-left"},o.a.createElement("h3",null,"BTC/USD"),o.a.createElement("p",null,"Last Price (USD):"," ",this.formmatNumberWithCommas(this.state.lastPrice.toFixed(1))," ","/ 24h VOL (BTC):"," ",this.formmatNumberWithCommas(this.state.volume24h.toFixed(0))),o.a.createElement("p",{style:{color:e}},"Price Change:",t," ",this.state.priceChange.toFixed(2),"%")))),o.a.createElement(E.a,null,o.a.createElement(O.a,{fluid:!0},o.a.createElement(E.a,null,o.a.createElement(h.a,{lg:12},o.a.createElement(b.a,{style:{marginBottom:"20px",marginTop:"20px"}},o.a.createElement(k.a,{disabled:this.state.zoom<.21,onClick:this.zoomOut.bind(this)},"Zoom Out"),o.a.createElement(k.a,{disabled:1===this.state.zoom,onClick:this.zoomIn.bind(this)},"Zoom In")))),o.a.createElement(E.a,null,o.a.createElement(h.a,{lg:6,className:"bids-container"},o.a.createElement(y,{orderBookBids:this.props.orderBookBids,zoom:this.state.zoom})),o.a.createElement(h.a,{lg:6,className:"asks-container"},o.a.createElement("div",{className:"depth-bars-asks-container"}),o.a.createElement(w,{orderBookAsks:this.props.orderBookAsks,zoom:this.state.zoom}))))))}}]),t}(n.Component);var z=Object(C.b)(function(e){return{orderBookBids:e.orderBookBids,orderBookAsks:e.orderBookAsks,tradesList:e.tradesList}},function(e){return Object(R.b)({updateAsksOrderBook:D,updateBidsOrderBook:N,clearBidsOrderBook:j,clearAsksOrderBook:F},e)})(T),_=a(20),L=Object(R.c)({orderBookBids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BIDS_ORDER_BOOK":var a=t.newBidsData,n=!1;if(e.length>0&&e.forEach(function(t,o){e[o].price&&a.price&&e[o].price===a.price&&(n=!0,e[o].count=a.count,e[o].amount=a.amount)}),!0===n)return n=!1,e.slice();var o=Object(_.a)(e).concat([a]);return o.sort(function(e,t){return t.price-e.price}),o.length>50&&o.pop(),o.length>0&&(o.forEach(function(e,t){e&&0!==e.count||o.splice(t,1)}),o.forEach(function(e,t){o[t-1]&&o[t-1].total?o[t].total=(parseFloat(o[t-1].total)+parseFloat(e.amount)).toFixed(2):o[t].total=parseFloat(e.amount).toFixed(2)})),o;case"CLEAR_BIDS":return t.newBidsData;default:return e.slice()}},orderBookAsks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ASKS_ORDER_BOOK":var a=t.newAsksData,n=!1;if(e.length>0&&e.forEach(function(t,o){e[o].price&&a.price&&e[o].price===a.price&&(n=!0,e[o].count=a.count,e[o].amount=a.amount)}),!0===n)return n=!1,e.slice();var o=Object(_.a)(e).concat([a]);return o.sort(function(e,t){return e.price-t.price}),o.length>50&&o.pop(),o.length>0&&(o.forEach(function(e,t){e&&0!==e.count||o.splice(t,1),(!e||e.amount>0)&&o.splice(t,1)}),o.forEach(function(e,t){o[t-1]&&o[t-1].total?o[t].total=(parseFloat(o[t-1].total)+Math.abs(parseFloat(e.amount))).toFixed(2):o[t].total=Math.abs(parseFloat(e.amount).toFixed(2))})),o;case"CLEAR_ASKS":return t.newAsksData;default:return e.slice()}}}),U=(a(48),Object(R.a)()(R.d)),I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(C.a,{store:U(L)},o.a.createElement("div",{className:"App"},o.a.createElement(z,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.e05cc558.chunk.js.map